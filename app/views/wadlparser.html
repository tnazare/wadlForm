
<div class="container" ng-controller="WadlParser">
    <form class="row" name="apiUrlForm" role="form" novalidate >
        <label for="url">Enter API url :</label>
        <input type="text" name="url" id="url" ng-model="apiHttpUrl"/>
        <button class="btn btn-success" ng-click="loadWadlOnClick(apiHttpUrl,$event)">Load wadl</button>
        <!--{{urlBack}}-->
    </form>

    <div class="container" ng-model="resources">
        <form name="apiRequestForm" ng-show="resources.base" novalidate role="form" >
            <fieldset>
                <legend>URLs disponibles</legend>
                <div class="form-group">
                    <label for="resource">Resources disponibles sur : "{{ resources.base }}"</label>
                    <select id="resource" class="form-control" ng-model="query.selectedResource" ng-options="resource.path for resource in resources.innerArray"></select>
                </div>
            </fieldset>

            <fieldset ng-show="query.selectedResource && query.selectedResource.queryParams.length != 0">
                <legend>URL Parameters</legend>
                <div class="form-group" ng-repeat="queryparam in query.selectedResource.queryParams">
                    <label for="{{identifyResourcePath(query.selectedResource.path)}}_queryparameter_{{ queryparam.httpName }}" class="col-sm-3 control-label" >{{ queryparam.httpName }}</label>
                    <input ng-if="isString(queryparam)" type="text" class="queryParams" name="{{queryparam.httpName}} :" id="{{identifyResourcePath(query.selectedResource.path)}}_queryparameter_{{ queryparam.httpName }}" ng-model="formSubmittedData.queryParams[queryparam.httpName]"/>
                    <input ng-if="isNumber(queryparam)" type="number" class="queryParams" name="{{queryparam.httpName}} :" id="{{identifyResourcePath(query.selectedResource.path)}}_queryparameter_{{ queryparam.httpName }}" ng-model="formSubmittedData.queryParams[queryparam.httpName]"/>
                    <input ng-if="isBoolean(queryparam)" type="checkbox" class="queryParams" name="{{queryparam.httpName}} :" id="{{identifyResourcePath(query.selectedResource.path)}}_queryparameter_{{ queryparam.httpName }}" ng-model="formSubmittedData.queryParams[queryparam.httpName]"/>
                </div>

            </fieldset>

            <fieldset ng-show="query.selectedResource.methods">
                <legend>Méthode HTTP à utiliser</legend>
                <div class="form-group">
                    <label for="method" class="col-sm-2 control-label" >Verbe : </label>
                    <select id="method" ng-model="query.selectedMethod" ng-options="method.httpMethodName for method in query.selectedResource.methods"></select>
                </div>
            </fieldset>
            <fieldset ng-show="query.selectedMethod && query.selectedMethod.params.length != 0">
                <legend>Query Parameters</legend>
                <div class="form-group" ng-repeat="param in query.selectedMethod.params">
                    <label for="{{identifyResourcePath(query.selectedResource.path)}}_form_parameter_{{ param.httpName }}" class="col-sm-3 control-label" >{{ param.httpName }}</label>
                    <input ng-if="isString(param)" type="text" name="{{param.httpName}} :" id="{{identifyResourcePath(query.selectedResource.path)}}_form_parameter_{{ param.httpName }}" ng-model="formSubmittedData.formParams[param.httpName]"/>
                    <input ng-if="isNumber(param)" type="number"  name="{{param.httpName}} :" id="{{identifyResourcePath(query.selectedResource.path)}}_form_parameter_{{ param.httpName }}" ng-model="formSubmittedData.formParams[param.httpName]"/>
                    <input ng-if="isBoolean(param)" type="checkbox" name="{{param.httpName}} :" id="{{identifyResourcePath(query.selectedResource.path)}}_form_parameter_{{ param.httpName }}" ng-model="formSubmittedData.formParams[param.httpName]"/>
                </div>
            </fieldset>

            <button class="btn btn-success" ng-click="launchRequestOnClick()">Balance la sauce !</button>
        </form>

        <div class="row">
            <p><pre class="prettyprint pre-scrollable" ng-show="responseXml">{{responseXml}}</pre></p>

        </div>
    </div>
</div>
